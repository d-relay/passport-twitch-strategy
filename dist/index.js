"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var t=require("util"),e=require("passport-oauth2"),r=require("node-fetch"),i=require("pkginfo");function o(t){return t&&"object"==typeof t&&"default"in t?t:{default:t}}var a=o(t),n=o(e),u=o(r),h=o(i);function s(t,e){const r=Object.assign(Object.assign({},t),{name:"twitch",authorizationURL:"https://id.twitch.tv/oauth2/authorize",tokenURL:"https://id.twitch.tv/oauth2/token"});this.clientID=t.clientID,n.default.call(this,r,e),this._oauth2.setAuthMethod("Bearer"),this._oauth2.useAuthorizationHeaderforGET(!0)}a.default.inherits(s,n.default),s.prototype.userProfile=function(t,e){return u.default("https://api.twitch.tv/helix/users",{method:"GET",headers:{"Client-ID":this.clientID,Accept:"application/vnd.twitchtv.v5+json",Authorization:"Bearer "+t}}).then(t=>t.ok?t.json():new n.default.InternalOAuthError("failed to fetch user profile")).then(t=>{const r=t.data[0];return e(null,r)}).catch(t=>e(t,null))},s.prototype.authorizationParams=function(t){var e={force_verify:!1};return void 0!==t.forceVerify&&(e.force_verify=!!t.forceVerify),e},h.default(module,"version");const c=s;exports.OAuth2Strategy=c,exports.Strategy=s;
//# sourceMappingURL=index.js.map
